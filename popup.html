<!DOCTYPE html>
<html>
<head>
  <title>DNS & SSL Inspector</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>DNS & SSL Inspector</h1>
      <div class="site-info">
        <div id="favicon-container"></div>
        <div id="current-url"></div>
      </div>
    </header>

    <div class="tabs">
      <button class="tab-button active" data-tab="dns">DNS Records</button>
      <button class="tab-button" data-tab="ssl">SSL Certificate</button>
      <button class="tab-button" data-tab="cloud">Cloud Provider</button>
      <button class="tab-button" data-tab="security">Security</button>
      <button class="tab-button" data-tab="settings">Settings</button>
    </div>

    <div class="tab-content">
      <div id="dns" class="tab-pane active">
        <div class="loader" id="dns-loader"></div>
        <div class="record-section">
          <h3>A Records</h3>
          <div id="a-records" class="records-list"></div>
        </div>
        <div class="record-section">
          <h3>AAAA Records</h3>
          <div id="aaaa-records" class="records-list"></div>
        </div>
        <div class="record-section">
          <h3>CNAME Records</h3>
          <div id="cname-records" class="records-list"></div>
        </div>
        <div class="record-section">
          <h3>MX Records</h3>
          <div id="mx-records" class="records-list"></div>
        </div>
        <div class="record-section">
          <h3>TXT Records</h3>
          <div id="txt-records" class="records-list"></div>
        </div>
        <div class="record-section">
          <h3>CAA Records</h3>
          <div id="caa-records" class="records-list"></div>
        </div>
      </div>

      <div id="ssl" class="tab-pane">
        <div class="loader" id="ssl-loader"></div>
        <div class="ssl-info">
          <div class="ssl-status">
            <span id="ssl-icon"></span>
            <span id="ssl-status-text"></span>
          </div>
          <div class="certificate-section">
            <h3>Certificate Details</h3>
            <table id="cert-details">
              <tr>
                <td>Issued To:</td>
                <td id="cert-subject"></td>
              </tr>
              <tr>
                <td>Issued By:</td>
                <td id="cert-issuer"></td>
              </tr>
              <tr>
                <td>Valid From:</td>
                <td id="cert-valid-from"></td>
              </tr>
              <tr>
                <td>Valid Until:</td>
                <td id="cert-valid-until"></td>
              </tr>
              <tr>
                <td>TLS Version:</td>
                <td id="tls-version"></td>
              </tr>
            </table>
          </div>
          <div class="certificate-section">
            <h3>Certificate Chain</h3>
            <div id="cert-chain"></div>
          </div>
        </div>
      </div>

      <div id="cloud" class="tab-pane">
        <div class="loader" id="cloud-loader"></div>
        <div id="cloud-provider-info">
          <div id="cloud-icon"></div>
          <div id="cloud-name"></div>
          <div id="cloud-details"></div>
        </div>
      </div>
      
      <div id="security" class="tab-pane">
        <div class="loader" id="security-loader"></div>
        <div id="security-alerts" class="security-alerts">
          <!-- Security alerts will be added here -->
        </div>
        <div class="security-details">
          <h3>Security Assessment</h3>
          <div id="security-summary"></div>
          <div id="security-recommendations"></div>
        </div>
        <div class="security-controls">
          <button id="btn-run-security-check" class="button primary">Run Security Check</button>
        </div>
      </div>
      
      <div id="settings" class="tab-pane">
        <h3>Settings</h3>
        <div class="settings-group">
          <h4>Session Data</h4>
          <div class="setting-item">
            <span>Data is only stored in memory during your browsing session</span>
          </div>
          <div class="setting-item">
            <button id="btn-clear-session" class="button danger">Clear All Session Data</button>
          </div>
        </div>
        <div class="settings-group">
          <h4>About</h4>
          <div class="setting-item">
            <span>DNS & SSL Inspector v1.0</span>
          </div>
          <div class="setting-item">
            <span>A developer-focused tool for DNS and SSL inspection</span>
          </div>
          <div class="setting-item">
            <span>Session Started: <span id="session-start-time">-</span></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Load scripts in correct order -->
  <!-- Load utility libraries first -->
  <script src="security-utils.js"></script>
  
  <!-- Load session data after utilities -->
  <script src="session-data.js"></script>
  
  <!-- Load specialized libraries that depend on utils and session -->
  <script src="security-alerts.js"></script>
  
  <!-- Load main popup script last -->
  <script src="popup.js"></script>
  
  <!-- Add script loading verification -->
  <script>
    console.log("Script loading verification:");
    console.log("- SecurityUtils loaded:", !!window.SecurityUtils);
    console.log("- SessionData loaded:", !!window.SessionData);
    console.log("- SecurityAlerts loaded:", !!window.SecurityAlerts);
  </script>
</body>
</html>